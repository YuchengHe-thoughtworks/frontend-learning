// array.map() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ ï½œ å¹¶ä¸”ä½ æ˜¯å¸Œæœ›ç»§ç»­ä½¿ç”¨å¾—åˆ°çš„æ–°æ•°ç»„
// è¿”å›žå€¼ï¼šä¸€ä¸ªæ–°æ•°ç»„ï¼ˆæ¯ä¸ªå…ƒç´ éƒ½æ˜¯å›žè°ƒå‡½æ•°çš„è¿”å›žå€¼ï¼‰
// æ–°æ•°ç»„ç”±åŽŸæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€æ¬¡æä¾›çš„å‡½æ•°åŽçš„è¿”å›žå€¼ç»„æˆ

// âš ï¸callbackFn åªä¼šåœ¨ã€æœ‰å€¼ã€‘çš„ç´¢å¼•ä¸Šè¢«è°ƒç”¨ï¼›
// é‚£äº›ä»Žæ¥æ²¡è¢«èµ‹è¿‡å€¼æˆ–è€…ä½¿ç”¨ delete çš„ç´¢å¼•åˆ™ä¸ä¼šè¢«è°ƒç”¨ã€‚

// âš ï¸å› ä¸º map ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„ï¼Œå½“ä½ ä¸æ‰“ç®—ã€ä½¿ç”¨è¿”å›žçš„æ–°æ•°ç»„ã€‘å´ä½¿ç”¨ map æ˜¯è¿èƒŒè®¾è®¡åˆè¡·çš„ï¼Œ
// è¯·ç”¨ forEach æˆ–è€… for-of æ›¿ä»£ã€‚
// => ä¸åº”è¯¥ä½¿ç”¨mapçš„æƒ…å†µï¼š1.ä½ ä¸æ‰“ç®—ä½¿ç”¨è¿”å›žçš„æ–°æ•°ç»„ 2.ä½ æ²¡æœ‰ä»Žå›žè°ƒå‡½æ•°ä¸­è¿”å›žå€¼

// ðŸŒŸmap æ–¹æ³•å¤„ç†æ•°ç»„å…ƒç´ çš„èŒƒå›´æ˜¯åœ¨ callbackFn æ–¹æ³•ç¬¬ä¸€æ¬¡è°ƒç”¨ä¹‹å‰å°±å·²ç»ç¡®å®šäº†ã€‚
// è°ƒç”¨ map æ–¹æ³•ä¹‹åŽè¿½åŠ çš„æ•°ç»„å…ƒç´ ä¸ä¼šè¢« callbackFn è®¿é—®ã€‚
// å¦‚æžœå­˜åœ¨çš„æ•°ç»„å…ƒç´ æ”¹å˜äº†ï¼Œé‚£ä¹ˆä¼ ç»™ callbackFn çš„å€¼æ˜¯ map è®¿é—®è¯¥å…ƒç´ æ—¶çš„å€¼ã€‚
// åœ¨ map å‡½æ•°è°ƒç”¨åŽä½†åœ¨è®¿é—®è¯¥å…ƒç´ å‰ï¼Œè¯¥å…ƒç´ è¢«åˆ é™¤çš„è¯ï¼Œåˆ™æ— æ³•è¢«è®¿é—®åˆ°ã€‚

const arr = [ 1, 4, 9, 16 ];

const doubleArr = arr.map(x => x * 2); // [ 2, 8, 18, 32 ]
// ç»ƒä¹ 1. æ±‚æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„å¹³æ–¹æ ¹
const roots = arr.map(x => Math.sqrt(x)); // [ 1, 2, 3, 4 ]

// ç»ƒä¹ 2. é‡æ–°æ ¼å¼åŒ–æ•°ç»„ä¸­çš„å¯¹è±¡
// åˆ›å»ºä¸€ä¸ªåŒ…å«å¯¹è±¡çš„æ•°ç»„
const kvArray = [
  { key: 1, value: 10 },
  { key: 2, value: 20 },
  { key: 3, value: 30 },
];
// é‡æ–°åˆ›å»ºä¸€ä¸ªæ ¼å¼åŒ–åŽçš„æ•°ç»„
const reformattedArray = kvArray.map(({ key, value }) =>
  ({ [key]: value })); // [ { '1': 10 }, { '2': 20 }, { '3': 30 } ]

// ç»ƒä¹ 3. ðŸŒŸå¦‚ä½•åœ¨ä¸€ä¸ªStringä¸Šä½¿ç”¨.map()
// -> èŽ·å–å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦æ‰€å¯¹åº”çš„ ASCII ç ç»„æˆçš„æ•°ç»„
const map = Array.prototype.map;
// Arrayæž„é€ å‡½æ•°çš„APIï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŽ§åˆ¶å°æ‰“å°Array.prototypeå¯ä»¥çŸ¥é“æœ‰ä»¥ä¸‹è¿™äº›æ–¹æ³•ã€‚
// è¿™æ˜¯Arrayçš„åŽŸåž‹å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¯¹æ•°ç»„è€Œè¨€æ˜¯å¯ä»¥ç»§æ‰¿æ‰€æœ‰çš„è¿™äº›æ–¹æ³•çš„ï¼š
const words = 'Hello World';
// call()æ–¹æ³•è°ƒç”¨ã€å…·æœ‰ç»™å®šå€¼ã€‘å’Œã€å•ç‹¬æä¾›å‚æ•°çš„å‡½æ•°ã€‘
const charCodes = map.call(words,x => x.charCodeAt(0));
// charCodes çŽ°åœ¨ç­‰äºŽ [72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100]

// é€šå¸¸æƒ…å†µä¸‹ï¼Œmap æ–¹æ³•ä¸­çš„ callbackFn å‡½æ•°åªéœ€è¦æŽ¥å—ä¸€ä¸ªå‚æ•°ï¼Œ
// å°±æ˜¯æ­£åœ¨è¢«éåŽ†çš„æ•°ç»„å…ƒç´ æœ¬èº«ã€‚
// ä½†è¿™å¹¶ã€ä¸æ„å‘³ã€‘ç€ map åªç»™ callbackFn ä¼ äº†ä¸€ä¸ªå‚æ•°ã€‚
// è¿™ä¸ªæ€ç»´æƒ¯æ€§å¯èƒ½ä¼šè®©æˆ‘ä»¬çŠ¯ä¸€ä¸ªå¾ˆå®¹æ˜“çŠ¯çš„é”™è¯¯ã€‚

const number = [1, 2, 3, 4];
const filterNumber = number.map ((v, i) => {
  if (i < 3) {
    return v;
  }
});
console.log(filterNumber); // [ 1, 2, 3, undefined ]
console.log(number); // [ 1, 2, 3, 4 ]
